<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>Projection Mapping</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
      img {
        max-width: 100%;
      }

      .blog-sidebar a {
        text-transform: capitalize;
      }

      body {
        font-size: 13px;
      }

      h1, h2, h3 {
        font-size: 18px;
        text-transform: capitalize;
      }

      .list-box-gradient {
        position: absolute;
        bottom:0;
        height: 50%;
        width: 100%;

        background: rgb(255,255,255); /* Old browsers */
        background: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* IE10+ */
        background: linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%); /* W3C */
      }

      .list-box {
        max-height: 300px;
        overflow: hidden;
        position: relative;
      }

    </style>
  </head>

  <body>

    <div class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">VeejayHQ</a>
        </div>
        <ul class="nav navbar-nav">
          <li><a class="blog-nav-item" href="/">Home</a></li>
          <li><a class="blog-nav-item" href="/features">Features</a></li>
          <li><a class="blog-nav-item" href="/category/news">News</a></li>
          <li><a class="blog-nav-item" href="/category/documentation">Documentation</a></li>
          <li><a class="blog-nav-item" href="/contact">Contact</a></li>
        </ul>
      </div>
    </div>



    <div class="container">
      <div class="span-12">
        <img src="/img/header.png" />
      </div>

      <div class="row">

        <div class="col-sm-8 blog-main">
            
    <div class="blog-post">
        <h2 class="blog-post-title"></h2>
        <p class="blog-post-meta">June 19, 14</p>

        <h3 id="linux-vj-projection-mapping-using-veejay-lpmt">Linux VJ Projection Mapping using Veejay + LPMT</h3>
<p>The output from Veejay may be used as a real-time projection-mapped surface using a program called Little Projection-Mapping Tool (LPMT). Using more than one projection-mapped Veejay instance should be possible, but is not covered by this document. Video is shared between the two applications using the v4l2loopback kernel module.  </p>
<p>LPMT - Little Projection-Mapping Tool; is a simple and powerful cross-platform tool for Projection-Mapping. Based on OpenFrameworks C++ toolkit.  </p>
<p>Both Veejay and LPMT are Free software with source code released under versions of the GNU GPL. Also, both can be controlled through OSC messages allowing them to play nicely with custom clients and other warez.  </p>
<h4 id="websites-">WEBSITES:</h4>
<ul>
<li></li>
<li><p>LPMT: <a href="http://hv-a.com/lpmt/">http://hv-a.com/lpmt/</a></p>
</li>
<li></li>
<li><p>v4l2loopback: <a href="https://github.com/umlaeute/v4l2loopback">https://github.com/umlaeute/v4l2loopback</a></p>
</li>
<li></li>
</ul>
<h4 id="references-">REFERENCES:</h4>
<ul>
<li></li>
<li><p>A work-in-progress &quot;Super-Sexy Secret Manual&quot; for LPMT version 1.4 <a href="http://hv-a.com/lpmt/?page_id=195">http://hv-a.com/lpmt/?page_id=195</a></p>
</li>
<li></li>
<li><p>v4l2loopback usage examples <a href="https://github.com/umlaeute/v4l2loopback/wiki">https://github.com/umlaeute/v4l2loopback/wiki</a></p>
</li>
<li></li>
</ul>
<h4 id="installation-">INSTALLATION:</h4>
<pre><code>* v4l2loopback  
$ git clone &lt;https://github.com/umlaeute/v4l2loopback.git&gt; v4l2loopback  
$ cd v4l2loopback  
$ make &amp;&amp; sudo make install  

Load the v4l2loopback kernel module:  
$ sudo modprobe v4l2loopback  

* yuv4mpeg_to_v4l2  
A tiny example application included with the v4l2loopback source code  
is used to stream YUV4MPEG output from Veejay into a v4l2 device.  
$ cd v4l2loopback/examples  
$ make yuv4mpeg_to_v4l2  

You may want to manually install the resulting yuv4mpeg_to_v4l2 binary  
somewhere in your $PATH for easier execution.  

* LPMT:  
Either, Download a pre-compiled binary:&lt;http://hv-a.com/lpmt/?page_id=63&gt;  
Or, Luke, use the Source:&lt;http://hv-a.com/lpmt/?page_id=70&gt;  

The following instructions are based on usage of the 64bit Linux binary.  
There&#39;s no real installation of the binary, run LPMT from its directory:  

$ tar -xjf lpmt_1.4_linux_x64.tar.bz2  
$ cd lpmt_1.4_linux_x64  
$ ./lpmt
</code></pre><p>Play around, LPMT is cool! Press &quot;h&quot; for a command overview and refer to the manual for more help.  </p>
<h4 id="configuration-">CONFIGURATION:</h4>
<h4 id="when-the-v4l2loopback-kernel-module-is-successfully-loaded-it-will-create-a-device-at-dev-videox-where-x-is-a-number-that-depends-on-how-many-video-devices-you-already-have-loaded-my-computer-has-a-connected-webcam-so-this-is-what-i-have-">When the v4l2loopback kernel module is successfully loaded, it will create a device at /dev/videoX where &quot;X&quot; is a number that depends on how many video devices you already have loaded. My computer has a connected webcam so this is what I have:</h4>
<pre><code>$ ls -l /dev/video*  
crw-rw----+ 1 root video 81, 0 Nov 15 15:12 /dev/video0  
crw-rw----+ 1 root video 81, 1 Nov 15 23:02 /dev/video1
</code></pre><p>/dev/video0 is my webcam (because it was already loaded first) and /dev/video1 is the v4l2loopback video device -- it is the most recently created device with the highest number. The rest of this document uses /dev/video1 as the v4l2loopback device, substitute according to your setup. Make sure the system user that will be running Veejay and LPMT has permission to read and write to the device. In my case, my user needs to be in the &quot;video&quot; group.  </p>
<p>Now, to configure LPMT. In the directory containing the lpmt binary, you should also find a &quot;data&quot; and &quot;libs&quot; directory.  </p>
<pre><code>$ ls lpmt_1.4_linux_x64  
data  
libs  
lpmt
</code></pre><p>Edit data/config.xml and add a CAMERA section with the WIDTH and HEIGHT set to the dimensions of your Veejay output and ID set to &quot;X&quot; (the number of the /dev/video device created by the v4l2loopback module). My CAMERAS section looks like this:  </p>
<pre><code>&lt;CAMERAS&gt;  
&lt;CAMERA&gt;  
&lt;WIDTH&gt;640&lt;/WIDTH&gt;  
&lt;HEIGHT&gt;480&lt;/HEIGHT&gt;  
&lt;ID&gt;0&lt;/ID&gt;  
&lt;/CAMERA&gt;  
&lt;CAMERA&gt;  
&lt;WIDTH&gt;720&lt;/WIDTH&gt;  
&lt;HEIGHT&gt;480&lt;/HEIGHT&gt;  
&lt;ID&gt;1&lt;/ID&gt;  
&lt;/CAMERA&gt;  
&lt;/CAMERAS&gt;
</code></pre><p>Configuration is complete!  </p>
<h4 id="execution-">EXECUTION:</h4>
<p>You may want to use several terminal windows for this. You may need to specify the full path of the executables depending on where you installed them and if they are in your $PATH.  </p>
<pre><code>Create a named pipe:  
$ mkfifo /tmp/pipe  

Feed the video loopback device with yuv4mpeg (Y4M) data that enters the pipe:  
$ yuv4mpeg_to_v4l2 /dev/video1 &lt; /tmp/pipe  

Start veejay, directing a Y4M output stream to the pipe:  
$ veejay --output 4 --output-file /tmp/pipe  

Start LPMT  
$ lpmt
</code></pre><p>Refer to the LPMT manual for how to configure your projection mapping. Do this to see veejay output right away:  </p>
<ul>
<li></li>
<li><p>press <F2> (or &quot;x&quot;)</p>
</li>
<li></li>
<li><p>click &quot;cam on/off&quot; to enable it. You may need to select a different camera number from the &quot;select camera&quot; list.</p>
</li>
<li></li>
</ul>
<h4 id="conclusion-">CONCLUSION:</h4>
<p>Epic!!! A Free VJ projection mapping solution for Linux! Thanks to all the people who have created these open source softwares and for their foresight and attention that has enabled interoperability.</p>

    </div><!-- /.blog-post -->

        </div><!-- /.blog-main -->

        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
            

            <h4>Categories</h4>
            <ol class="list-unstyled">
                
                <li><a href="/category/sendvims/">sendvims</a></li>
                
                <li><a href="/category/reference/">reference</a></li>
                
                <li><a href="/category/news/">news</a></li>
                
                <li><a href="/category/howto/">howto</a></li>
                
                <li><a href="/category/documentation/">documentation</a></li>
                
            </ol>
            <h4>Pages</h4>
            <ol class="list-unstyled">
                
                <li><a href="/contact/">Contact</a></li>
                
                <li><a href="/contributing/">Contributing</a></li>
                
                <li><a href="/documentation/">Documentation</a></li>
                
                <li><a href="/features/">Features</a></li>
                
                <li><a href="/installing/">Installation</a></li>
                
                <li><a href="/roadmap/">Roadmap</a></li>
                
                <li><a href="/screenshots/">Screenshots</a></li>
                
                <li><a href="/showcase/">showcase</a></li>
                
            </ol>
        </div>

      </div><!-- /.row -->

    </div><!-- /.container -->

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <script src="../../assets/js/docs.min.js"></script>
  </body>
</html>
